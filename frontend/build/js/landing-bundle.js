webpackJsonp([0],{100:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var s=n(3),i=r(s),a=n(29),u=r(a);n(30);var o=n(130),l=r(o);u.default.render(i.default.createElement(l.default,null),document.getElementById("react-subscription"))},130:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(131);var o=n(3),l=r(o),c=n(32),m=n(52),d=r(m),b=n(22),f=r(b),p=n(53),h=n(54),g=n(55),y=n(56),v=n(235),E=function(e){function t(e){s(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return(0,d.default)(n),n.state={submitSuccess:!1,alreadySubscribed:!1,submitPending:!1,submitErrors:{email:null},unsubscribeSuccess:!1,unsubscribeError:""},n._token=(0,v.getQueryParams)().token,n}return a(t,e),u(t,[{key:"validateError",value:function(e){return this.setState({submitErrors:{email:null}}),e.email?(0,g.validateEmail)(e.email)?{email:null}:{email:gettext("Oops... There's a mistake. Please type a valid email.")}:{email:gettext("Please type your email.")}}},{key:"onSubmit",value:function(e){var t=this;this.setState({submitSuccess:!1,submitPending:!0}),(0,y.post)("subscriptions/",e).then(function(e){t.setState({submitSuccess:!0,submitPending:!1,alreadySubscribed:e.data.already_subscribed})}).catch(function(e){var n=gettext("Oops! Something went wrong. Please try again in a moment.");e.response&&e.response.data.email&&(n=e.response.data.email[0]),t.setState({submitPending:!1,submitErrors:{email:n}})})}},{key:"unsubscribe",value:function(){var e=this;this.setState({submitPending:!0}),(0,y.post)("subscriptions/unsubscribe/",{token:this._token}).then(function(){e.setState({unsubscribeSuccess:!0,submitPending:!1})}).catch(function(t){var n=gettext("Oops! Something went wrong. Please try again in a moment.");t.response&&t.response.data.detail&&(n=t.response.data.detail),e.setState({submitPending:!1,unsubscribeError:n})})}},{key:"renderForm",value:function(){var e=this;return l.default.createElement("div",{className:(0,f.default)("subscription-form",{hidden:this.state.submitSuccess||this.state.submitPending})},l.default.createElement("h5",null,gettext("Get notified when it's ready")),l.default.createElement(c.Form,{onSubmit:this.onSubmit,validateError:this.validateError,dontValidateOnMount:!0,validateOnSubmit:!0},function(t){return l.default.createElement("form",{onSubmit:t.submitForm},l.default.createElement("div",{className:"inputs"},l.default.createElement(c.Text,{field:"email",name:"email",className:"grow",placeholder:"Email"}),l.default.createElement(p.Button,{type:"submit"},gettext("Subscribe"))),l.default.createElement("div",{className:"error"},t.errors.email,e.state.submitErrors.email))}))}},{key:"renderUnsubscribe",value:function(){return this.state.unsubscribeError?l.default.createElement("div",{className:"error"},this.state.unsubscribeError):l.default.createElement("div",{className:(0,f.default)("unsubscribe",{hidden:this.state.unsubscribeSuccess||this.state.submitPending})},l.default.createElement("h5",null,gettext("Are you sure that you want to unsubscribe?")),l.default.createElement("span",{onClick:this.unsubscribe},l.default.createElement(p.Button,null,gettext("Yes, I'm sure"))))}},{key:"render",value:function(){return l.default.createElement("div",{className:"subscription"},this.state.submitSuccess&&!this.state.alreadySubscribed&&l.default.createElement("h4",null,gettext("You were subscribed successfully!"),l.default.createElement("br",null),gettext("See ya!")),this.state.submitSuccess&&this.state.alreadySubscribed&&l.default.createElement("h4",null,gettext("Looks like you are already subscribed."),l.default.createElement("br",null),gettext("Thank you for being with us!")),this.state.unsubscribeSuccess&&l.default.createElement("h4",null,gettext("You were unsubscribed."),l.default.createElement("br",null),gettext("Hope to see you again.")),this.state.submitPending&&l.default.createElement(h.DoubleBounceSpinner,null),this._token?this.renderUnsubscribe():this.renderForm(),l.default.createElement("div",{className:"promise"},gettext("We promise to never spam you or share your personal information!")))}}]),t}(o.Component);t.default=E},131:function(e,t,n){var r=n(132);"string"==typeof r&&(r=[[e.i,r,""]]);var s={hmr:!0};s.transform=void 0,s.insertInto=void 0;n(16)(r,s);r.locals&&(e.exports=r.locals)},132:function(e,t,n){t=e.exports=n(15)(!1),t.push([e.i,".subscription {\n  margin-top: 50px;\n}\n.subscription .inputs {\n  max-width: 500px;\n  margin-top: 18px;\n  margin-left: auto;\n  margin-right: auto;\n  display: flex;\n}\n.subscription .error {\n  margin-top: 17px;\n  color: #f57575;\n}\n.subscription .promise {\n  margin-top: 45px;\n  color: #a1a1a1;\n}\n@media screen and (max-width: 767px) {\n  .subscription .inputs {\n    flex-direction: column;\n  }\n  .subscription .inputs button {\n    margin-top: 10px;\n    width: 100%;\n  }\n}\n",""])},235:function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.location.search;e=e.split("+").join(" ");for(var t={},n=void 0,r=/[?&]?([^=]+)=([^&]*)/g;n=r.exec(e);)t[decodeURIComponent(n[1])]=decodeURIComponent(n[2]);return t}Object.defineProperty(t,"__esModule",{value:!0}),t.getQueryParams=r}},[100]);