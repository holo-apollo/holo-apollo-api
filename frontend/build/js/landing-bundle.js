webpackJsonp([4],{169:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(0),a=r(i),s=n(18),o=r(s);n(92);var u=n(198),l=r(u);o.default.render(a.default.createElement(l.default,null),document.getElementById("react-subscription"))},198:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(199);var u=n(0),l=r(u),c=n(27),d=n(99),m=r(d),b=n(37),p=r(b),f=n(100),h=n(102),g=n(39),v=n(103),y=n(40),x=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return(0,m.default)(n),n.state={submitSuccess:!1,alreadySubscribed:!1,submitPending:!1,submitErrors:{email:null},unsubscribeSuccess:!1,unsubscribeError:""},n._token=(0,y.getQueryParams)().token,n}return s(t,e),o(t,[{key:"validateError",value:function(e){return this.setState({submitErrors:{email:null}}),e.email?(0,g.validateEmail)(e.email)?{email:null}:{email:gettext("Oops... There's a mistake. Please type a valid email.")}:{email:gettext("Please type your email.")}}},{key:"onSubmit",value:function(e){var t=this;this.setState({submitSuccess:!1,submitPending:!0}),(0,v.post)("subscriptions/",e).then(function(e){t.setState({submitSuccess:!0,submitPending:!1,alreadySubscribed:e.data.already_subscribed})}).catch(function(e){var n=gettext("Oops! Something went wrong. Please try again in a moment.");e.response&&e.response.data.email&&(n=e.response.data.email[0]),t.setState({submitPending:!1,submitErrors:{email:n}})})}},{key:"unsubscribe",value:function(){var e=this;this.setState({submitPending:!0}),(0,v.post)("subscriptions/unsubscribe/",{token:this._token}).then(function(){e.setState({unsubscribeSuccess:!0,submitPending:!1})}).catch(function(t){var n=gettext("Oops! Something went wrong. Please try again in a moment.");t.response&&t.response.data.detail&&(n=t.response.data.detail),e.setState({submitPending:!1,unsubscribeError:n})})}},{key:"renderForm",value:function(){var e=this;return l.default.createElement("div",{className:(0,p.default)("subscription-form",{hidden:this.state.submitSuccess||this.state.submitPending})},l.default.createElement("h5",null,gettext("Get notified when it's ready")),l.default.createElement(c.Form,{onSubmit:this.onSubmit,validateError:this.validateError,dontValidateOnMount:!0,validateOnSubmit:!0},function(t){return l.default.createElement("form",{onSubmit:t.submitForm},l.default.createElement("div",{className:"inputs"},l.default.createElement(c.Text,{field:"email",name:"email",className:"grow",placeholder:"Email"}),l.default.createElement(f.Button,{type:"submit"},gettext("Subscribe"))),l.default.createElement("div",{className:"error"},t.errors.email,e.state.submitErrors.email))}))}},{key:"renderUnsubscribe",value:function(){return this.state.unsubscribeError?l.default.createElement("div",{className:"error"},this.state.unsubscribeError):l.default.createElement("div",{className:(0,p.default)("unsubscribe",{hidden:this.state.unsubscribeSuccess||this.state.submitPending})},l.default.createElement("h5",null,gettext("Are you sure that you want to unsubscribe?")),l.default.createElement("span",{onClick:this.unsubscribe},l.default.createElement(f.Button,null,gettext("Yes, I'm sure"))))}},{key:"render",value:function(){return l.default.createElement("div",{className:"subscription"},this.state.submitSuccess&&!this.state.alreadySubscribed&&l.default.createElement("h4",null,gettext("You were subscribed successfully!"),l.default.createElement("br",null),gettext("See ya!")),this.state.submitSuccess&&this.state.alreadySubscribed&&l.default.createElement("h4",null,gettext("Looks like you are already subscribed."),l.default.createElement("br",null),gettext("Thank you for being with us!")),this.state.unsubscribeSuccess&&l.default.createElement("h4",null,gettext("You were unsubscribed."),l.default.createElement("br",null),gettext("Hope to see you again.")),this.state.submitPending&&l.default.createElement(h.DoubleBounceSpinner,null),this._token?this.renderUnsubscribe():this.renderForm(),l.default.createElement("div",{className:"promise"},gettext("We promise to never spam you or share your personal information!")))}}]),t}(u.Component);t.default=x},199:function(e,t,n){var r=n(200);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0};i.transform=void 0,i.insertInto=void 0;n(113)(r,i);r.locals&&(e.exports=r.locals)},200:function(e,t,n){t=e.exports=n(112)(!1),t.push([e.i,".subscription {\n  margin-top: 50px;\n}\n.subscription .inputs {\n  max-width: 500px;\n  margin-top: 18px;\n  margin-left: auto;\n  margin-right: auto;\n  display: flex;\n}\n.subscription .error {\n  margin-top: 17px;\n  color: #f57575;\n}\n.subscription .promise {\n  margin-top: 45px;\n  color: #a1a1a1;\n}\ninput {\n  -webkit-appearance: none;\n  margin: 0;\n  border-radius: 0;\n  font: inherit;\n  height: 48px;\n  border: solid 1px #404040;\n  padding: 0 18px;\n  font-size: 16px;\n  font-weight: 500;\n}\ninput:hover {\n  box-shadow: 0 1px 25px 7px rgba(104, 139, 217, 0.15);\n  border: solid 1px #ffffff;\n}\ninput:focus,\ninput:active {\n  box-shadow: 0 1px 25px 7px rgba(104, 139, 217, 0.15);\n  border: solid 1px #404040;\n  outline: none;\n}\ninput::-webkit-input-placeholder {\n  /* Chrome/Opera/Safari */\n  color: #a1a1a1;\n}\ninput::-moz-placeholder {\n  /* Firefox 19+ */\n  color: #a1a1a1;\n}\ninput:-ms-input-placeholder {\n  /* IE 10+ */\n  color: #a1a1a1;\n}\ninput:-moz-placeholder {\n  /* Firefox 18- */\n  color: #a1a1a1;\n}\n@media screen and (max-width: 767px) {\n  .subscription .inputs {\n    flex-direction: column;\n  }\n  .subscription .inputs .btn {\n    margin-top: 10px;\n    width: 100%;\n  }\n}\n",""])},39:function(e,t,n){"use strict";function r(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}function i(e){return/^[-0-9+()\s]*$/.test(String(e))&&a(e,25,5)}function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return 0===n&&!e||Boolean(e)&&e.length<=t&&e.length>=n}Object.defineProperty(t,"__esModule",{value:!0}),t.validateEmail=r,t.validatePhone=i,t.validateLength=a},40:function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.location.search;e=e.split("+").join(" ");for(var t={},n=void 0,r=/[?&]?([^=]+)=([^&]*)/g;n=r.exec(e);)t[decodeURIComponent(n[1])]=decodeURIComponent(n[2]);return t}function i(e,t){if(e)return t?window.open(e):window.location=e}Object.defineProperty(t,"__esModule",{value:!0}),t.getQueryParams=r,t.redirect=i}},[169]);