webpackJsonp([1],{

/***/ 247:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar _react = __webpack_require__(2);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = __webpack_require__(36);\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\n__webpack_require__(37);\n\nvar _signup = __webpack_require__(248);\n\nvar _signup2 = _interopRequireDefault(_signup);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_reactDom2.default.render(_react2.default.createElement(_signup2.default, null), document.getElementById('react-signup'));\n\n//////////////////\n// WEBPACK FOOTER\n// ./frontend/src/signup.js\n// module id = 247\n// module chunks = 1\n\n//# sourceURL=webpack:///./frontend/src/signup.js?");

/***/ }),

/***/ 248:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\n__webpack_require__(64);\n\nvar _react = __webpack_require__(2);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactForm = __webpack_require__(39);\n\nvar _reactAutobind = __webpack_require__(59);\n\nvar _reactAutobind2 = _interopRequireDefault(_reactAutobind);\n\nvar _classnames = __webpack_require__(26);\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nvar _buttons = __webpack_require__(60);\n\nvar _spinners = __webpack_require__(61);\n\nvar _validators = __webpack_require__(62);\n\nvar _rest = __webpack_require__(63);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Signup = function (_Component) {\n    _inherits(Signup, _Component);\n\n    function Signup(props) {\n        _classCallCheck(this, Signup);\n\n        var _this = _possibleConstructorReturn(this, (Signup.__proto__ || Object.getPrototypeOf(Signup)).call(this, props));\n\n        (0, _reactAutobind2.default)(_this);\n        _this.state = {\n            submitPending: false,\n            submitErrors: {\n                email: null,\n                password: null,\n                first_name: null,\n                last_name: null,\n                username: null,\n                phone: null\n            },\n            signupStep: 1,\n            formValues: {}\n        };\n        return _this;\n    }\n\n    _createClass(Signup, [{\n        key: 'goNext',\n        value: function goNext() {\n            this.setState({\n                signupStep: 2\n            });\n        }\n    }, {\n        key: 'goBack',\n        value: function goBack() {\n            this.setState({\n                signupStep: 1\n            });\n        }\n    }, {\n        key: 'validateError1',\n        value: function validateError1(values) {\n            this.setState({ submitErrors: {\n                    email: null,\n                    password: null,\n                    first_name: null,\n                    last_name: null,\n                    username: null,\n                    phone: null\n                } });\n            var errors = {\n                email: null,\n                password: null\n            };\n            if (!values.email) {\n                errors.email = gettext('Please type your email.');\n            } else if (!(0, _validators.validateEmail)(values.email)) {\n                errors.email = gettext('Oops... There\\'s a mistake. Please type a valid email.');\n            }\n            // TODO: add strong password validation\n            if (!values.password || !values.password2) {\n                errors.password = gettext('Please type your password twice.');\n            } else if (values.password !== values.password2) {\n                errors.password = gettext('Oops... Passwords didn\\'t match');\n            }\n            return errors;\n        }\n    }, {\n        key: 'validateError2',\n        value: function validateError2(values) {\n            this.setState({ submitErrors: {\n                    email: null,\n                    password: null,\n                    first_name: null,\n                    last_name: null,\n                    username: null,\n                    phone: null\n                } });\n            var errors = {\n                first_name: null,\n                last_name: null,\n                username: null,\n                phone: null\n            };\n            if (!(0, _validators.validateLength)(values.first_name, 30, 2)) {\n                errors.first_name = gettext('Please type your first name 2-30 characters long.');\n            }\n            if (!(0, _validators.validateLength)(values.last_name, 30)) {\n                errors.first_name = gettext('Max length of last name is 30 characters.');\n            }\n            if (!(0, _validators.validateLength)(values.username, 30, 2)) {\n                errors.username = gettext('Please type your name on the site 2-30 characters long.');\n            }\n            if (!(0, _validators.validatePhone)(values.phone)) {\n                errors.phone = gettext('Please type a valid phone number.');\n            }\n            return errors;\n        }\n    }, {\n        key: 'onSubmit1',\n        value: function onSubmit1(values) {\n            var _this2 = this;\n\n            this.setState({\n                submitPending: true\n            });\n            (0, _rest.get)('users/check_email/?email=' + values.email).then(function (response) {\n                _this2.setState({\n                    submitPending: false\n                });\n                var emailExists = response.data.email_exists;\n                if (emailExists) {\n                    _this2.setState({\n                        submitErrors: _extends({}, _this2.state.submitErrors, {\n                            email: gettext('That email already exists')\n                        })\n                    });\n                } else {\n                    _this2.setState({\n                        formValues: {\n                            email: values.email,\n                            password: values.password\n                        }\n                    });\n                    _this2.goNext();\n                }\n            }).catch(function () {\n                _this2.setState({\n                    submitErrors: _extends({}, _this2.state.submitErrors, {\n                        email: gettext('\\'Oops! Something went wrong. Please try again in a moment.')\n                    })\n                });\n            });\n        }\n    }, {\n        key: 'onSubmit2',\n        value: function onSubmit2(values) {\n            var _this3 = this;\n\n            this.setState({\n                submitPending: true\n            });\n            values = _extends({}, this.state.formValues, values);\n            (0, _rest.post)('users/', values).then(function () {\n                window.location = '/'; // TODO: change it to profile page\n            }).catch(function (error) {\n                var messages = {\n                    common: gettext('Oops! Something went wrong. Please try again in a moment.')\n                };\n                if (error.response && error.response.data && _typeof(error.response.data) === 'object') {\n                    messages = error.response.data;\n                }\n                _this3.setState({\n                    submitPending: false,\n                    submitErrors: messages\n                });\n            });\n        }\n    }, {\n        key: 'renderTextInput',\n        value: function renderTextInput(error, fieldName, placeholder) {\n            return [_react2.default.createElement(\n                'div',\n                { className: 'error', key: 'error-' + fieldName },\n                error ? error : this.state.submitErrors[fieldName]\n            ), _react2.default.createElement(_reactForm.Text, {\n                key: 'field-' + fieldName,\n                field: fieldName,\n                name: fieldName,\n                className: 'grow',\n                placeholder: placeholder\n            })];\n        }\n    }, {\n        key: 'renderForm1',\n        value: function renderForm1() {\n            var _this4 = this;\n\n            return _react2.default.createElement(\n                'div',\n                { className: (0, _classnames2.default)('signup-form', { 'hidden': this.state.submitPending || this.state.signupStep !== 1 }) },\n                _react2.default.createElement(\n                    _reactForm.Form,\n                    {\n                        onSubmit: this.onSubmit1,\n                        validateError: this.validateError1,\n                        dontValidateOnMount: true,\n                        validateOnSubmit: true\n                    },\n                    function (formApi) {\n                        return _react2.default.createElement(\n                            'form',\n                            { onSubmit: formApi.submitForm },\n                            _react2.default.createElement(\n                                'div',\n                                { className: 'inputs' },\n                                _this4.renderTextInput(formApi.errors.email, 'email', gettext('Email')),\n                                _react2.default.createElement(\n                                    'div',\n                                    { className: 'error' },\n                                    formApi.errors.password\n                                ),\n                                _react2.default.createElement(_reactForm.Text, {\n                                    field: 'password',\n                                    type: 'password',\n                                    name: 'password',\n                                    className: 'grow',\n                                    placeholder: gettext('Make up password')\n                                }),\n                                _react2.default.createElement(_reactForm.Text, {\n                                    field: 'password2',\n                                    type: 'password',\n                                    name: 'password2',\n                                    className: 'grow',\n                                    placeholder: gettext('Retype password')\n                                }),\n                                _react2.default.createElement(\n                                    _buttons.Button,\n                                    { type: 'submit' },\n                                    gettext('Create account')\n                                ),\n                                _react2.default.createElement(\n                                    'div',\n                                    null,\n                                    gettext('or')\n                                ),\n                                _react2.default.createElement(\n                                    'a',\n                                    { href: window.django_data.urls.facebook },\n                                    _react2.default.createElement(\n                                        _buttons.Button,\n                                        { color: 'blue' },\n                                        gettext('Sign up with Facebook')\n                                    )\n                                )\n                            )\n                        );\n                    }\n                )\n            );\n        }\n    }, {\n        key: 'renderForm2',\n        value: function renderForm2() {\n            var _this5 = this;\n\n            return _react2.default.createElement(\n                'div',\n                { className: (0, _classnames2.default)('signup-form', { 'hidden': this.state.submitPending || this.state.signupStep !== 2 }) },\n                _react2.default.createElement(\n                    'div',\n                    { onClick: this.goBack },\n                    'Go back'\n                ),\n                _react2.default.createElement(\n                    _reactForm.Form,\n                    {\n                        onSubmit: this.onSubmit2,\n                        validateError: this.validateError2,\n                        dontValidateOnMount: true,\n                        validateOnSubmit: true\n                    },\n                    function (formApi) {\n                        var fields = {\n                            first_name: gettext('Your first name *'),\n                            last_name: gettext('Your last name'),\n                            username: gettext('Name on the site *'),\n                            phone: gettext('Phone *')\n                        };\n                        return _react2.default.createElement(\n                            'form',\n                            { onSubmit: formApi.submitForm },\n                            _react2.default.createElement(\n                                'div',\n                                { className: 'inputs' },\n                                Object.keys(fields).map(function (item) {\n                                    return _this5.renderTextInput(formApi.errors[item], item, fields[item]);\n                                }),\n                                _react2.default.createElement(\n                                    _buttons.Button,\n                                    { type: 'submit' },\n                                    gettext('Save')\n                                )\n                            ),\n                            _react2.default.createElement(\n                                'div',\n                                { className: 'error' },\n                                _this5.state.submitErrors.email\n                            ),\n                            _react2.default.createElement(\n                                'div',\n                                { className: 'error' },\n                                _this5.state.submitErrors.common\n                            )\n                        );\n                    }\n                )\n            );\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            return _react2.default.createElement(\n                'div',\n                { className: 'login-signup' },\n                _react2.default.createElement(\n                    'h1',\n                    null,\n                    'Sign up'\n                ),\n                _react2.default.createElement(\n                    'div',\n                    null,\n                    'Already a member? ',\n                    _react2.default.createElement(\n                        'a',\n                        { href: '/login/' },\n                        'Log in'\n                    )\n                ),\n                this.state.submitPending && _react2.default.createElement(_spinners.DoubleBounceSpinner, null),\n                this.renderForm1(),\n                this.renderForm2()\n            );\n        }\n    }]);\n\n    return Signup;\n}(_react.Component);\n\nexports.default = Signup;\n\n//////////////////\n// WEBPACK FOOTER\n// ./frontend/src/apps/users/containers/signup.js\n// module id = 248\n// module chunks = 1\n\n//# sourceURL=webpack:///./frontend/src/apps/users/containers/signup.js?");

/***/ }),

/***/ 64:
/***/ (function(module, exports, __webpack_require__) {

eval("\nvar content = __webpack_require__(65);\n\nif(typeof content === 'string') content = [[module.i, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = __webpack_require__(20)(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(false) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./login_signup.less\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./login_signup.less\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}\n\n//////////////////\n// WEBPACK FOOTER\n// ./frontend/src/styles/login_signup.less\n// module id = 64\n// module chunks = 1 2\n\n//# sourceURL=webpack:///./frontend/src/styles/login_signup.less?");

/***/ }),

/***/ 65:
/***/ (function(module, exports, __webpack_require__) {

eval("exports = module.exports = __webpack_require__(19)(false);\n// imports\n\n\n// module\nexports.push([module.i, \".login-signup .inputs {\\n  display: flex;\\n  flex-direction: column;\\n}\\n.login-signup .inputs input {\\n  margin-bottom: 10px;\\n}\\n.login-signup .inputs .btn {\\n  width: 100%;\\n}\\n.login-signup .error {\\n  margin-top: 17px;\\n  color: #f57575;\\n}\\n\", \"\"]);\n\n// exports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader!./node_modules/less-loader/dist/cjs.js!./frontend/src/styles/login_signup.less\n// module id = 65\n// module chunks = 1 2\n\n//# sourceURL=webpack:///./frontend/src/styles/login_signup.less?./node_modules/css-loader!./node_modules/less-loader/dist/cjs.js");

/***/ })

},[247]);